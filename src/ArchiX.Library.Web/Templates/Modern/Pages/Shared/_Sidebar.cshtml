<nav id="sidebar" class="col-md-3 col-lg-2 d-md-block sidebar">
    <div class="sidebar-header">
        <h3><i class="bi bi-grid-fill"></i> Menü</h3>
    </div>

    <div class="position-sticky pt-3">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link @(ViewContext.RouteData.Values["page"]?.ToString() == "/Dashboard" ? "active" : "")"
                   asp-page="/Dashboard">
                    <i class="bi bi-house-door-fill"></i>
                    Ana Sayfa
                </a>
            </li>

            <!-- Raporlar Menu (Collapsible) -->
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="collapse" href="#raporlarMenu"
                   role="button" aria-expanded="true" aria-controls="raporlarMenu">
                    <i class="bi bi-graph-up"></i>
                    Raporlar
                    <i class="bi bi-chevron-down float-end"></i>
                </a>
                <div class="collapse show" id="raporlarMenu">
                    <ul class="nav flex-column ms-3">
                        <li class="nav-item">
                            <a class="nav-link" href="/Raporlar/Kombine" target="_blank" rel="noopener">
                                <i class="bi bi-graph-up-arrow"></i>
                                Kombine
                                <i class="bi bi-box-arrow-up-right ms-1" style="font-size: 0.8em;"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/Raporlar/Pivot" target="_blank" rel="noopener">
                                <i class="bi bi-table"></i>
                                Pivot
                                <i class="bi bi-box-arrow-up-right ms-1" style="font-size: 0.8em;"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/Raporlar/GridListe" target="_blank" rel="noopener">
                                <i class="bi bi-list-check"></i>
                                GridListe
                                <i class="bi bi-box-arrow-up-right ms-1" style="font-size: 0.8em;"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/Raporlar/Form" target="_blank" rel="noopener">
                                <i class="bi bi-ui-checks-grid"></i>
                                Form
                                <i class="bi bi-box-arrow-up-right ms-1" style="font-size: 0.8em;"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Admin Menu: Raporlar altına, Ayarlar üstüne -->
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="collapse" href="#adminMenu"
                   role="button" aria-expanded="true" aria-controls="adminMenu">
                    <i class="bi bi-tools"></i>
                    Admin
                    <i class="bi bi-chevron-down float-end"></i>
                </a>

                <div class="collapse show" id="adminMenu">
                    <ul class="nav flex-column ms-3">

                        <!-- Admin / Security -->
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="collapse" href="#adminSecurityMenu"
                               role="button" aria-expanded="true" aria-controls="adminSecurityMenu">
                                <i class="bi bi-shield-lock-fill"></i>
                                Security
                                <i class="bi bi-chevron-down float-end"></i>
                            </a>

                            <div class="collapse show" id="adminSecurityMenu">
                                <ul class="nav flex-column ms-3">
                                    <li class="nav-item"><a class="nav-link" href="/Admin/Security/Index" target="_blank" rel="noopener noreferrer">Index aaa</a></li>
                                    <li class="nav-item"><a class="nav-link" href="/Admin/Security/Blacklist" target="_blank" rel="noopener noreferrer">Blacklist</a></li>
                                    <li class="nav-item"><a class="nav-link" href="/Admin/Security/PolicySettings" target="_blank" rel="noopener noreferrer">PolicySettings</a></li>
                                    <li class="nav-item"><a class="nav-link" href="/Admin/Security/PasswordPolicy" target="_blank" rel="noopener noreferrer">PasswordPolicy</a></li>
                                    <li class="nav-item"><a class="nav-link" href="/Admin/Security/AuditTrail" target="_blank" rel="noopener noreferrer">AuditTrail</a></li>
                                    <li class="nav-item"><a class="nav-link" href="/Admin/Security/PasswordHistory" target="_blank" rel="noopener noreferrer">PasswordHistory</a></li>
                                    <li class="nav-item"><a class="nav-link" href="/Admin/Security/PolicyTest" target="_blank" rel="noopener noreferrer">PolicyTest</a></li>
                                </ul>
                            </div>
                        </li>

                        <!-- Admin / Reports -->
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="collapse" href="#adminReportsMenu"
                               role="button" aria-expanded="true" aria-controls="adminReportsMenu">
                                <i class="bi bi-graph-up"></i>
                                Reports
                                <i class="bi bi-chevron-down float-end"></i>
                            </a>

                            <div class="collapse show" id="adminReportsMenu">
                                <ul class="nav flex-column ms-3">
                                    <li class="nav-item"><a class="nav-link" href="/Admin/Reports/DatasetParameters" target="_blank" rel="noopener noreferrer">DatasetParameters</a></li>
                                </ul>
                            </div>
                        </li>

                    </ul>
                </div>
            </li>

            <!-- Ayarlar (Admin'in altında) -->
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="bi bi-gear-fill"></i>
                    Ayarlar
                </a>
            </li>

            <!-- Divider -->
            <li class="nav-item mt-3">
                <hr class="text-white-50">
            </li>
        </ul>
    </div>
</nav>

<script>
    // Sidebar toggle for mobile
    document.addEventListener('DOMContentLoaded', function () {
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');

        if (sidebarToggle && sidebar) {
            sidebarToggle.addEventListener('click', function () {
                sidebar.classList.toggle('show');
            });
        }
    });
</script>